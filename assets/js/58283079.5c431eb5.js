"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[1819],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>d});var r=t(96540);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}},36875:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>j,contentTitle:()=>g,default:()=>y,frontMatter:()=>v,metadata:()=>r,toc:()=>b});const r=JSON.parse('{"id":"utilities/useAnimatedGestureHandler","title":"useAnimatedGestureHandler","description":"This API is deprecated, doesn\'t receive any updates and will be removed in the next major version of Reanimated.","source":"@site/versioned_docs/version-3.x/utilities/useAnimatedGestureHandler.mdx","sourceDirName":"utilities","slug":"/utilities/useAnimatedGestureHandler","permalink":"/react-native-reanimated/docs/3.x/utilities/useAnimatedGestureHandler","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/versioned_docs/version-3.x/utilities/useAnimatedGestureHandler.mdx","tags":[],"version":"3.x","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"getRelativeCoords","permalink":"/react-native-reanimated/docs/3.x/utilities/getRelativeCoords"},"next":{"title":"Advanced APIs","permalink":"/react-native-reanimated/docs/3.x/category/advanced-apis"}}');var s=t(74848),a=t(28453),i=t(9176),d=t(72188),o=t(55535),l=t(85285);const c={code:"function AnimatedGestureHandlerTsx1(_,ctx){const{offset}=this.__closure;ctx.startX=offset.value;}"},u={code:"function AnimatedGestureHandlerTsx2(event,ctx){const{offset}=this.__closure;offset.value=ctx.startX+event.translationX;}"},h={code:"function AnimatedGestureHandlerTsx3(_){const{offset,withSpring}=this.__closure;offset.value=withSpring(0);}"},p={code:"function AnimatedGestureHandlerTsx4(){const{offset}=this.__closure;return{transform:[{translateX:offset.value}]};}"};function x(){const e=(0,o.useSharedValue)(0),n=(0,o.useAnimatedGestureHandler)({onStart:function(){const n=function(n,t){t.startX=e.value};return n.__closure={offset:e},n.__workletHash=4426369847894,n.__initData=c,n}(),onActive:function(){const n=function(n,t){e.value=t.startX+n.translationX};return n.__closure={offset:e},n.__workletHash=0x919b3c1877c,n.__initData=u,n}(),onEnd:function(){const n=function(n){e.value=(0,o.withSpring)(0)};return n.__closure={offset:e,withSpring:o.withSpring},n.__workletHash=0xf90b0a78853,n.__initData=h,n}()}),t=(0,o.useAnimatedStyle)(function(){const n=()=>({transform:[{translateX:e.value}]});return n.__closure={offset:e},n.__workletHash=3146015790997,n.__initData=p,n}());return(0,s.jsx)(i.A,{style:m.container,children:(0,s.jsx)(l.pU,{onGestureEvent:n,onHandlerStateChange:n,children:(0,s.jsx)(o.default.View,{style:[m.circle,t]})})})}const m=d.A.create({container:{flex:1,alignItems:"center",justifyContent:"center",height:"100%"},circle:{height:120,width:120,backgroundColor:"#b58df1",borderRadius:500,cursor:"grab"}}),f="import React from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  useAnimatedGestureHandler,\n  withSpring,\n} from 'react-native-reanimated';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\n\nexport default function App() {\n  const offset = useSharedValue(0);\n\n  const gestureHandler = useAnimatedGestureHandler({\n    onStart: (_, ctx) => {\n      ctx.startX = offset.value;\n    },\n    onActive: (event, ctx) => {\n      offset.value = ctx.startX + event.translationX;\n    },\n    onEnd: (_) => {\n      offset.value = withSpring(0);\n    },\n  });\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ translateX: offset.value }],\n  }));\n\n  return (\n    <View style={styles.container}>\n      <PanGestureHandler\n        onGestureEvent={gestureHandler}\n        onHandlerStateChange={gestureHandler}>\n        <Animated.View style={[styles.circle, animatedStyle]} />\n      </PanGestureHandler>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%',\n  },\n  circle: {\n    height: 120,\n    width: 120,\n    backgroundColor: '#b58df1',\n    borderRadius: 500,\n    cursor: 'grab',\n  },\n});\n",v={sidebar_position:5},g="useAnimatedGestureHandler",j={},b=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>gestureHandlers</code>",id:"gesturehandlers",level:4},{value:"<code>dependencies</code> <Optional></Optional>",id:"dependencies-",level:4},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}];function H(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components},{Details:t,InteractiveExample:r,Optional:i}=n;return t||w("Details",!0),r||w("InteractiveExample",!0),i||w("Optional",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"useanimatedgesturehandler",children:"useAnimatedGestureHandler"})}),"\n",(0,s.jsxs)(n.admonition,{type:"danger",children:[(0,s.jsx)(n.p,{children:"This API is deprecated, doesn't receive any updates and will be removed in the next major version of Reanimated."}),(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-gesture-handler/docs/guides/upgrading-to-2#upgrading-to-the-new-api",children:(0,s.jsx)(n.strong,{children:"Upgrading to the new API introduced in Gesture Handler 2"})})," migration guide."]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"useAnimatedGestureHandler"})," lets you create animations based on ",(0,s.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-gesture-handler/docs/category/gesture-handlers-legacy",children:"gesture handlers"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["You need to pass the object defined using ",(0,s.jsx)(n.code,{children:"useAnimatedGestureHandler"})," to the ",(0,s.jsx)(n.code,{children:"onGestureEvent"})," property of a gesture handler component."]}),"\n",(0,s.jsxs)(n.p,{children:["This hook requires ",(0,s.jsx)(n.code,{children:"react-native-gesture-handler"})," ",(0,s.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-gesture-handler/docs/#installation",children:"installed and configured"})," in your project."]}),"\n",(0,s.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { useAnimatedGestureHandler } from 'react-native-reanimated';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\n\nfunction App() {\n  const x = useSharedValue(0);\n\n  // highlight-start\n  const gestureHandler = useAnimatedGestureHandler({\n    onStart: (_, ctx) => {\n      ctx.startX = x.value;\n    },\n    onActive: (event, ctx) => {\n      x.value = ctx.startX + event.translationX;\n    },\n  });\n  // highlight-end\n\n  return (\n    <PanGestureHandler onGestureEvent={gestureHandler}>\n      <Animated.View />\n    </PanGestureHandler>\n  );\n}\n"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Type definitions"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface GestureHandlers<\n  Event extends NativeEventWrapper<PropsUsedInUseAnimatedGestureHandler>,\n  Context extends Record<string, unknown>\n> {\n  [key: string]: GestureHandler<Event, Context> | undefined;\n  onStart?: GestureHandler<Event, Context>;\n  onActive?: GestureHandler<Event, Context>;\n  onEnd?: GestureHandler<Event, Context>;\n  onFail?: GestureHandler<Event, Context>;\n  onCancel?: GestureHandler<Event, Context>;\n  onFinish?: GestureHandler<Event, Context>;\n}\n\n// highlight-start\nfunction useAnimatedGestureHandler<\n  Event extends NativeEventWrapper<PropsUsedInUseAnimatedGestureHandler> = DefaultEvent,\n  Context extends Record<string, unknown> = Record<string, unknown>\n>(handlers: GestureHandlers<Event, Context>, dependencies?: DependencyList);\n// highlight-end\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,s.jsx)(n.h4,{id:"gesturehandlers",children:(0,s.jsx)(n.code,{children:"gestureHandlers"})}),"\n",(0,s.jsxs)(n.p,{children:["The first argument is an object that can carry one or more handlers.\nYou can set the handlers under the following keys: ",(0,s.jsx)(n.code,{children:"onStart"}),", ",(0,s.jsx)(n.code,{children:"onActive"}),", ",(0,s.jsx)(n.code,{children:"onEnd"}),", ",(0,s.jsx)(n.code,{children:"onFail"}),", ",(0,s.jsx)(n.code,{children:"onCancel"}),", ",(0,s.jsx)(n.code,{children:"onFinish"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Each of the specified handlers will be triggered depending on the current state of the attached gesture handler.\nRead more about gesture handling states in the ",(0,s.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-gesture-handler/docs/under-the-hood/state",children:"Gesture Handler documentation"}),".\nThe handler receives the following arguments:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"event"})," [object] - an event object carrying the event payload.\nThe payload will be different depending on the type of the gesture handler to which the callback is attached to (",(0,s.jsx)(n.code,{children:"PanGestureHandler"}),", ",(0,s.jsx)(n.code,{children:"RotationGestureHandler"}),", etc.)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"context"})," [object] - a JavaScript object that can be used to store some state. You can read and write any data to it. This object persists between events and across handlers for all the selected states."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"dependencies-",children:[(0,s.jsx)(n.code,{children:"dependencies"})," ",(0,s.jsx)(i,{})]}),"\n",(0,s.jsx)(n.p,{children:"An optional array of dependencies."}),"\n",(0,s.jsxs)(n.p,{children:["Only relevant when using Reanimated ",(0,s.jsx)(n.a,{href:"https://docs.swmansion.com/react-native-reanimated/docs/guides/web-support#web-without-the-babel-plugin",children:"without the Babel plugin on the Web"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"returns",children:"Returns"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"useAnimatedGestureHandler"})," returns a handler object that can be attached to one of the gesture handler components provided by the ",(0,s.jsx)(n.code,{children:"react-native-gesture-handler"})," library.\nYou need to pass this object to the ",(0,s.jsx)(n.code,{children:"onGestureEvent"})," property of a gesture handler."]}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n","\n",(0,s.jsx)(r,{src:f,component:x,label:"Grab and drag the circle"}),"\n",(0,s.jsx)(n.h2,{id:"platform-compatibility",children:"Platform compatibility"}),"\n",(0,s.jsx)("div",{className:"platform-compatibility",children:(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Android"}),(0,s.jsx)(n.th,{children:"iOS"}),(0,s.jsx)(n.th,{children:"Web"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u26a0\ufe0f"})]})})]})}),"\n",(0,s.jsxs)(n.p,{children:["* On Web, you have to pass returned handler object to both ",(0,s.jsx)(n.code,{children:"onGestureEvent"})," and ",(0,s.jsx)(n.code,{children:"onHandlerStateChange"})," parameters."]})]})}function y(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(H,{...e})}):H(e)}function w(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);