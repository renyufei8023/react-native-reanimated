"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[9479],{29070:(e,n,t)=>{t.d(n,{A:()=>o});const o="import React, { useState } from 'react';\nimport { View, Button, StyleSheet, Pressable } from 'react-native';\nimport Animated, { Keyframe, Easing } from 'react-native-reanimated';\n\nexport default function KeyframeExample() {\n  const [visible, setVisible] = useState(true);\n\n  const enteringAnimation = new Keyframe({\n    0: {\n      opacity: 0,\n      transform: [\n        { translateY: 50 },\n        { rotate: '820deg' },\n        { skewX: '0deg' },\n        { scale: 0 },\n      ],\n    },\n    50: {\n      opacity: 0.5,\n      transform: [\n        { translateY: 25 },\n        { rotate: '-180deg' },\n        { skewX: '30deg' },\n        { scale: 0.5 },\n      ],\n      easing: Easing.out(Easing.quad),\n    },\n    100: {\n      opacity: 1,\n      transform: [\n        { translateY: 0 },\n        { rotate: '0deg' },\n        { skewX: '0deg' },\n        { scale: 1 },\n      ],\n    },\n  }).duration(1000);\n\n  const exitingAnimation = new Keyframe({\n    0: {\n      opacity: 1,\n      transform: [{ translateY: 0 }, { rotateZ: '0deg' }],\n    },\n    10: {\n      opacity: 1,\n      transform: [{ translateY: 25 }, { rotateZ: '0deg' }],\n      easing: Easing.exp,\n    },\n    50: {\n      opacity: 0.5,\n      transform: [{ translateY: -100 }, { rotateZ: '60deg' }],\n    },\n    100: {\n      opacity: 0,\n      transform: [{ translateY: -300 }, { rotateZ: '120deg' }],\n    },\n  }).duration(1000);\n\n  return (\n    <View style={styles.container}>\n      {visible && (\n        <Animated.View\n          entering={enteringAnimation}\n          exiting={exitingAnimation}\n          style={styles.box}>\n          <Pressable\n            onPress={() => setVisible(!visible)}\n            style={styles.button}\n          />\n        </Animated.View>\n      )}\n      <Button title=\"Animate box\" onPress={() => setVisible(!visible)} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    height: 250,\n    flex: 1,\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n  },\n  button: {\n    height: '100%',\n    width: '100%',\n  },\n  box: {\n    width: 100,\n    height: 100,\n    backgroundColor: '#b58df1',\n    borderRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 48,\n  },\n});\n"},39890:(e,n,t)=>{t.d(n,{A:()=>ve});var o=t(82195),i=t(21098),r=t(39471),a=t(42901),s=t(42805),l=()=>{};var d=function(){var e=!1;if(s.A)try{var n={};Object.defineProperty(n,"passive",{get:()=>(e=!0,!1)}),window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(t){}return e}();function c(){return this.cancelBubble}function u(){return this.defaultPrevented}function m(e,n){var t=function(e){return null!=e&&(d?e:Boolean(e.capture))}(n);return function(n,o){if(null==n||"function"!=typeof n.addEventListener)throw new Error("createEventHandle: called on an invalid target.");var i=n;if(null!=o){var r=e=>{return o(((n=e).nativeEvent=n,n.persist=l,n.isDefaultPrevented=u,n.isPropagationStopped=c,n));var n};return i.addEventListener(e,r,t),function(){null!=i&&i.removeEventListener(e,r,t)}}return l}}var f,h,y="keyboard",p="keyboard",v=!1,g=new Set,x="keyboard",b="mouse",j="touch",w="contextmenu",k="mousedown",P="mousemove",E="mouseup",A="pointerdown",K="pointermove",C="scroll",M="selectionchange",I="touchcancel",D="touchmove",R="touchstart",S={passive:!0},T={capture:!0,passive:!0},L=m("blur",S),Y=m("focus",S),V=m("visibilitychange",T),F=m("keydown",T),H=m(A,T),O=m(K,T),B=m(w,T),_=m(k,T),N=m(P,T),Z=m(E,T),X=m(C,T),q=m(M,T),U=m(I,T),J=m(D,T),W=m(R,T);function $(){null==f&&null==h||(null!=f&&(p=f,f=null),null!=h&&(y=h,h=null),G())}function z(e){var n=e.type;if("undefined"!=typeof window&&null!=window.PointerEvent){if(n===A)return void(y!==e.pointerType&&(p=e.pointerType,y=e.pointerType,G()));if(n===K)return void(p!==e.pointerType&&(p=e.pointerType,G()))}else{if(v||(n===k&&y!==b&&(p=b,y=b,G()),n===P&&p!==b&&(p=b,G())),n===R)return v=!0,e.touches&&e.touches.length>1&&(v=!1),void(y!==j&&(p=j,y=j,G()));n!==w&&n!==E&&n!==M&&n!==C&&n!==I&&n!==D||(v=!1)}}function G(){var e={activeModality:y,modality:p};g.forEach((n=>{n(e)}))}s.A&&(L(window,(function(){f=p,h=y,y=x,p=x,G(),v=!1})),Y(window,(function(){$()})),F(document,(function(e){e.metaKey||e.altKey||e.ctrlKey||p!==x&&(p=x,y=x,G())})),H(document,z),O(document,z),V(document,(function(){"hidden"!==document.visibilityState&&$()})),B(document,z),_(document,z),N(document,z),Z(document,z),U(document,z),J(document,z),W(document,z),q(document,z),X(document,z));var Q=t(22562),ee=t(79318);function ne(e,n){var t=(0,ee.A)((()=>new Map)),o=(0,ee.A)((()=>{var o=m(e,n);return(e,n)=>{var i=t.get(e);null!=i&&i(),null==n&&t.delete(e);var r=o(e,n);return t.set(e,r),r}}));return(0,Q.A)((()=>()=>{t.forEach((e=>{e()})),t.clear()}),[t]),o}var te={},oe={passive:!0},ie="react-gui:hover:lock",re="react-gui:hover:unlock";function ae(e,n,t){var o=document.createEvent("CustomEvent"),i=t||te,r=i.bubbles,a=void 0===r||r,s=i.cancelable,l=void 0===s||s,d=i.detail;o.initCustomEvent(n,a,l,d),e.dispatchEvent(o)}function se(e){var n=e.pointerType;return null!=n?n:p}function le(e,n){var t=n.contain,o=n.disabled,i=n.onHoverStart,r=n.onHoverChange,a=n.onHoverUpdate,s=n.onHoverEnd,l=!("undefined"==typeof window||null==window.PointerEvent),d=ne(l?"pointermove":"mousemove",oe),c=ne(l?"pointerenter":"mouseenter",oe),u=ne(l?"pointerleave":"mouseleave",oe),m=ne(ie,oe),f=ne(re,oe);(0,Q.A)((()=>{var n=e.current;if(null!==n){var l=function(e){null!=s&&s(e),null!=r&&r(!1),d(n,null),u(n,null)},h=function(n){var o=e.current;null!=o&&"touch"!==se(n)&&(t&&ae(o,re),l(n))},y=function(e){"touch"!==se(e)&&null!=a&&(null==e.x&&(e.x=e.clientX),null==e.y&&(e.y=e.clientY),a(e))},p=function(e){null!=i&&i(e),null!=r&&r(!0),null!=a&&d(n,o?null:y),u(n,o?null:h)};c(n,o?null:function(n){var i=e.current;if(null!=i&&"touch"!==se(n)){t&&ae(i,ie),p(n);m(i,o?null:function(e){e.target!==i&&l(n)}),f(i,o?null:function(e){e.target!==i&&p(n)})}})}}),[c,d,u,m,f,t,o,i,r,a,s,e])}var de=t(94497),ce=t(14442),ue=t(8589),me=["children","delayLongPress","delayPressIn","delayPressOut","disabled","focusable","onBlur","onContextMenu","onFocus","onHoverIn","onHoverOut","onKeyDown","onLongPress","onPress","onPressMove","onPressIn","onPressOut","style","testOnly_hovered","testOnly_pressed"];function fe(e,n){var t=e.children,s=e.delayLongPress,l=e.delayPressIn,d=e.delayPressOut,c=e.disabled,u=e.focusable,m=e.onBlur,f=e.onContextMenu,h=e.onFocus,y=e.onHoverIn,p=e.onHoverOut,v=e.onKeyDown,g=e.onLongPress,x=e.onPress,b=e.onPressMove,j=e.onPressIn,w=e.onPressOut,k=e.style,P=e.testOnly_hovered,E=e.testOnly_pressed,A=(0,i.A)(e,me),K=he(!0===P),C=K[0],M=K[1],I=he(!1),D=I[0],R=I[1],S=he(!0===E),T=S[0],L=S[1],Y=(0,r.useRef)(null),V=(0,a.A)(n,Y),F=(0,r.useMemo)((()=>({delayLongPress:s,delayPressStart:l,delayPressEnd:d,disabled:c,onLongPress:g,onPress:x,onPressChange:L,onPressStart:j,onPressMove:b,onPressEnd:w})),[s,l,d,c,g,x,j,b,w,L]),H=(0,de.A)(Y,F),O=H.onContextMenu,B=H.onKeyDown;le(Y,{contain:!0,disabled:c,onHoverChange:M,onHoverStart:y,onHoverEnd:p});var _={hovered:C,focused:D,pressed:T},N=r.useCallback((e=>{e.nativeEvent.target===Y.current&&(R(!1),null!=m&&m(e))}),[Y,R,m]),Z=r.useCallback((e=>{e.nativeEvent.target===Y.current&&(R(!0),null!=h&&h(e))}),[Y,R,h]),X=r.useCallback((e=>{null!=O&&O(e),null!=f&&f(e)}),[f,O]),q=r.useCallback((e=>{null!=B&&B(e),null!=v&&v(e)}),[v,B]);return r.createElement(ue.A,(0,o.A)({},A,H,{accessibilityDisabled:c,focusable:!c&&!1!==u,onBlur:N,onContextMenu:X,onFocus:Z,onKeyDown:q,pointerEvents:c?"none":A.pointerEvents,ref:V,style:[!c&&ye.root,"function"==typeof k?k(_):k]}),"function"==typeof t?t(_):t)}function he(e){var n=(0,r.useState)(!1);return[n[0]||e,n[1]]}var ye=ce.A.create({root:{cursor:"pointer",touchAction:"manipulation"}}),pe=(0,r.memo)((0,r.forwardRef)(fe));pe.displayName="Pressable";const ve=pe},58934:(e,n,t)=>{t.d(n,{A:()=>c});var o=t(39471),i=t(8589),r=t(39890),a=t(90424),s=t(14442),l=t(19727),d=t(47671);function c(){const[e,n]=(0,o.useState)(!0),t=new l.Keyframe({0:{opacity:0,transform:[{translateY:50},{rotate:"820deg"},{skewX:"0deg"},{scale:0}]},50:{opacity:.5,transform:[{translateY:25},{rotate:"-180deg"},{skewX:"30deg"},{scale:.5}],easing:l.Easing.out(l.Easing.quad)},100:{opacity:1,transform:[{translateY:0},{rotate:"0deg"},{skewX:"0deg"},{scale:1}]}}).duration(1e3),s=new l.Keyframe({0:{opacity:1,transform:[{translateY:0},{rotateZ:"0deg"}]},10:{opacity:1,transform:[{translateY:25},{rotateZ:"0deg"}],easing:l.Easing.exp},50:{opacity:.5,transform:[{translateY:-100},{rotateZ:"60deg"}]},100:{opacity:0,transform:[{translateY:-300},{rotateZ:"120deg"}]}}).duration(1e3);return(0,d.jsxs)(i.A,{style:u.container,children:[e&&(0,d.jsx)(l.default.View,{entering:t,exiting:s,style:u.box,children:(0,d.jsx)(r.A,{onPress:()=>n(!e),style:u.button})}),(0,d.jsx)(a.A,{title:"Animate box",onPress:()=>n(!e)})]})}const u=s.A.create({container:{height:250,flex:1,justifyContent:"flex-end",alignItems:"center"},button:{height:"100%",width:"100%"},box:{width:100,height:100,backgroundColor:"#b58df1",borderRadius:24,justifyContent:"center",alignItems:"center",marginBottom:48}})},87442:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>f,frontMatter:()=>l,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"layout-animations/keyframe-animations","title":"Keyframe animations","description":"Keyframes are animation definition schemas that let you create complex animations. They allow you more flexibility than standard Entering and Exiting presets.","source":"@site/versioned_docs/version-3.x/layout-animations/keyframe-animations.mdx","sourceDirName":"layout-animations","slug":"/layout-animations/keyframe-animations","permalink":"/react-native-reanimated/docs/3.x/layout-animations/keyframe-animations","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/versioned_docs/version-3.x/layout-animations/keyframe-animations.mdx","tags":[],"version":"3.x","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Entering/Exiting animations","permalink":"/react-native-reanimated/docs/3.x/layout-animations/entering-exiting-animations"},"next":{"title":"Layout transitions","permalink":"/react-native-reanimated/docs/3.x/layout-animations/layout-transitions"}}');var i=t(47671),r=t(30620),a=t(58934),s=t(29070);const l={sidebar_position:2},d="Keyframe animations",c={},u=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>definitions</code>",id:"definitions",level:4},{value:"Modifiers",id:"modifiers",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Example",id:"example",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}];function m(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:t,InteractiveExample:o,PlatformCompatibility:l}=n;return t||h("Details",!0),o||h("InteractiveExample",!0),l||h("PlatformCompatibility",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"keyframe-animations",children:"Keyframe animations"})}),"\n",(0,i.jsx)(n.p,{children:"Keyframes are animation definition schemas that let you create complex animations. They allow you more flexibility than standard Entering and Exiting presets."}),"\n",(0,i.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import { Keyframe } from 'react-native-reanimated';\n\nconst keyframe = new Keyframe({\n  0: {\n    transform: [{ rotate: '0deg' }],\n  },\n  45: {\n    transform: [{ rotate: '100deg' }],\n    easing: Easing.exp,\n  },\n  100: {\n    transform: [{ rotate: '45deg' }],\n  },\n});\n\nfunction App() {\n  return <Animated.View entering={keyframe} />;\n}\n"})}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Type definitions"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"type FirstFrame =\n  | {\n      0: KeyframeProps & { easing?: never };\n      from?: never;\n    }\n  | {\n      0?: never;\n      from: KeyframeProps & { easing?: never };\n    };\n\ntype LastFrame =\n  | { 100?: KeyframeProps; to?: never }\n  | { 100?: never; to: KeyframeProps };\n\nexport type ValidKeyframeProps = FirstFrame &\n  LastFrame &\n  Record<number, KeyframeProps>;\n\nclass Keyframe {\n  constructor(definitions: ValidKeyframeProps;\n  duration(durationMs: number): Keyframe;\n  delay(delayMs: number): Keyframe;\n  reduceMotion(reduceMotionV: ReduceMotion): Keyframe;\n  withCallback(callback: (finished: boolean) => void): Keyframe;\n}\n"})})]}),"\n",(0,i.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,i.jsx)(n.h4,{id:"definitions",children:(0,i.jsx)(n.code,{children:"definitions"})}),"\n",(0,i.jsxs)(n.p,{children:["An object, that contains definitions of your animation.\nThe object keys should be within range ",(0,i.jsx)(n.code,{children:"0-100"})," and correspond to animation progress.\nThe object values should consist of style props and optionally of an ",(0,i.jsx)(n.a,{href:"/docs/animations/withTiming/#easing",children:"easing function"}),". If easing property is not provided, it defaults to ",(0,i.jsx)(n.code,{children:"Easing.linear"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"The keys take the following values:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"0"})," or ",(0,i.jsx)(n.code,{children:"from"}),": Initial state of the object."]}),"\n",(0,i.jsxs)(n.li,{children:["Middle points (e.g., ",(0,i.jsx)(n.code,{children:"45"}),"): Intermediate states of the object."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"100"})," or ",(0,i.jsx)(n.code,{children:"to"}),": Final state of the object."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The key ",(0,i.jsx)(n.code,{children:"0"})," (or ",(0,i.jsx)(n.code,{children:"from"}),") should be assigned the style that you want for your object at the beginning of the animation. The key ",(0,i.jsx)(n.code,{children:"100"})," (or ",(0,i.jsx)(n.code,{children:"to"}),") should be assigned the style that you want for your object at the end of the animation."]}),"\n",(0,i.jsx)(n.h2,{id:"modifiers",children:"Modifiers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"keyframe\n  .duration(1000)\n  .delay(500)\n  .reduceMotion(ReduceMotion.Never)\n  .withCallback((finished) => {\n    console.log(`finished without interruptions: ${finished}`);\n  });\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".duration(durationMs: number)"})," is the length of the animation (in milliseconds). Defaults to ",(0,i.jsx)(n.code,{children:"500"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".delay(durationMs: number)"})," is the delay before the animation starts (in milliseconds). Defaults to ",(0,i.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".reduceMotion(reduceMotion: ReduceMotion)"})," determines how the animation responds to the device's reduced motion accessibility setting."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".withCallback(callback: (finished: boolean) => void)"})," is the callback that will fire after the animation ends. Sets ",(0,i.jsx)(n.code,{children:"finished"})," to ",(0,i.jsx)(n.code,{children:"true"})," when animation ends without interruptions, and ",(0,i.jsx)(n.code,{children:"false"})," otherwise."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"remarks",children:"Remarks"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Providing keyframe ",(0,i.jsx)(n.code,{children:"0"})," or ",(0,i.jsx)(n.code,{children:"from"})," is required as it contains the initial state of the object you want to animate."]}),"\n",(0,i.jsx)(n.li,{children:"Ensure you provide the initial value for all style properties you want to animate in other keyframes."}),"\n",(0,i.jsxs)(n.li,{children:["If you want to add easing to an animation between two keyframes you have to pass it to the second one. As a result you should never provide any easing to keyframe ",(0,i.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Do not provide both ",(0,i.jsx)(n.code,{children:"0"})," and ",(0,i.jsx)(n.code,{children:"from"}),", or ",(0,i.jsx)(n.code,{children:"100"})," and ",(0,i.jsx)(n.code,{children:"to"})," keyframes, as it will result in a parsing conflict."]}),"\n",(0,i.jsx)(n.li,{children:"If you want to animate transform style, make sure that all properties in the transformation array are in the same order in all keyframes."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(o,{src:s.A,component:a.A}),"\n",(0,i.jsx)(n.h2,{id:"platform-compatibility",children:"Platform compatibility"}),"\n",(0,i.jsx)(l,{android:!0,ios:!0,web:!0})]})}function f(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},90424:(e,n,t)=>{t.d(n,{A:()=>d});var o=t(39471),i=t(14442),r=t(21844),a=t(31071),s=o.forwardRef(((e,n)=>{var t=e.accessibilityLabel,i=e.color,s=e.disabled,d=e.onPress,c=e.testID,u=e.title;return o.createElement(r.A,{accessibilityLabel:t,accessibilityRole:"button",disabled:s,focusable:!s,onPress:d,ref:n,style:[l.button,i&&{backgroundColor:i},s&&l.buttonDisabled],testID:c},o.createElement(a.A,{style:[l.text,s&&l.textDisabled]},u))}));s.displayName="Button";var l=i.A.create({button:{backgroundColor:"#2196F3",borderRadius:2},text:{color:"#fff",fontWeight:"500",padding:8,textAlign:"center",textTransform:"uppercase"},buttonDisabled:{backgroundColor:"#dfdfdf"},textDisabled:{color:"#a1a1a1"}});const d=s}}]);