"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[6180],{29700:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>f});const l=JSON.parse('{"id":"scroll/useScrollViewOffset","title":"useScrollViewOffset","description":"useScrollViewOffset lets you to create animations based on the offset of a ScrollView.","source":"@site/docs/scroll/useScrollViewOffset.mdx","sourceDirName":"scroll","slug":"/scroll/useScrollViewOffset","permalink":"/react-native-reanimated/docs/scroll/useScrollViewOffset","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/docs/scroll/useScrollViewOffset.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"scrollTo","permalink":"/react-native-reanimated/docs/scroll/scrollTo"},"next":{"title":"useAnimatedScrollHandler","permalink":"/react-native-reanimated/docs/scroll/useAnimatedScrollHandler"}}');var r=n(47671),o=n(30620),i=n(48443),a=n(37443);const s={sidebar_position:2},c="useScrollViewOffset",d={},f=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>animatedRef</code>",id:"animatedref",level:4},{value:"<code>initialRef</code> <Optional></Optional>",id:"initialref-",level:4},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}];function u(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{Details:n,InteractiveExample:l,Optional:s,PlatformCompatibility:c}=t;return n||h("Details",!0),l||h("InteractiveExample",!0),s||h("Optional",!0),c||h("PlatformCompatibility",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"usescrollviewoffset",children:"useScrollViewOffset"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"useScrollViewOffset"})," lets you to create animations based on the offset of a ",(0,r.jsx)(t.code,{children:"ScrollView"}),".\nThe hook automatically detects if the ",(0,r.jsx)(t.code,{children:"ScrollView"})," is horizontal or vertical."]}),"\n",(0,r.jsx)(t.h2,{id:"reference",children:"Reference"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"import { useScrollViewOffset } from 'react-native-reanimated';\n\nfunction App() {\n  const animatedRef = useAnimatedRef();\n  // highlight-next-line\n  const scrollOffset = useScrollViewOffset(animatedRef);\n  return (\n    <Animated.ScrollView ref={animatedRef}>{/* ... */}</Animated.ScrollView>\n  );\n}\n"})}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Type definitions"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"function useScrollViewOffset(\n  animatedRef: AnimatedRef<AnimatedScrollView>,\n  initialRef?: SharedValue<number>\n): SharedValue<number>;\n"})})]}),"\n",(0,r.jsx)(t.h3,{id:"arguments",children:"Arguments"}),"\n",(0,r.jsx)(t.h4,{id:"animatedref",children:(0,r.jsx)(t.code,{children:"animatedRef"})}),"\n",(0,r.jsxs)(t.p,{children:["An ",(0,r.jsx)(t.a,{href:"/docs/core/useAnimatedRef#returns",children:"animated ref"})," connected to the ScrollView component you'd want to scroll on. The animated ref has to be passed either to an ",(0,r.jsx)(t.a,{href:"/docs/fundamentals/glossary#animated-component",children:"Animated component"})," or a React Native built-in component."]}),"\n",(0,r.jsxs)(t.h4,{id:"initialref-",children:[(0,r.jsx)(t.code,{children:"initialRef"})," ",(0,r.jsx)(s,{})]}),"\n",(0,r.jsx)(t.p,{children:"An optional shared value to be updated with the scroll offset. If not provided a new shared value will be created internally."}),"\n",(0,r.jsx)(t.h3,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"useScrollViewOffset"})," returns a ",(0,r.jsx)(t.a,{href:"/docs/fundamentals/glossary#shared-value",children:"shared value"})," which holds the current offset of the ",(0,r.jsx)(t.code,{children:"ScrollView"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"example",children:"Example"}),"\n","\n",(0,r.jsx)(l,{src:a.A,component:i.A,showCode:!0}),"\n",(0,r.jsx)(t.h2,{id:"remarks",children:"Remarks"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"animatedRef"})," argument can be changed at will and the hook will correctly return values based on the ScrollView component it is connected to, for example:"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"useScrollViewOffset(someState ? someScrollRefA : someScrollRefB)"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"platform-compatibility",children:"Platform compatibility"}),"\n",(0,r.jsx)(c,{android:!0,ios:!0,web:!0})]})}function m(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}function h(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},37443:(e,t,n)=>{n.d(t,{A:()=>l});const l="import React from 'react';\nimport { View, Text, StyleSheet, TextInput, Button } from 'react-native';\nimport Animated, {\n  useAnimatedProps,\n  useAnimatedRef,\n  useDerivedValue,\n  useScrollViewOffset,\n} from 'react-native-reanimated';\nimport type { DerivedValue } from 'react-native-reanimated';\n\nexport default function App() {\n  const animatedRef = useAnimatedRef<Animated.ScrollView>();\n  // highlight-start\n  const offset = useScrollViewOffset(animatedRef);\n  const text = useDerivedValue(\n    () => `Scroll offset: ${offset.value.toFixed(1)}`\n  );\n  // highlight-end\n  const [isScrollHorizontal, setIsScrollHorizontal] =\n    React.useState<boolean>(false);\n\n  return (\n    <View style={styles.container}>\n      <AnimatedText text={text} />\n      <Animated.ScrollView\n        style={styles.scroll}\n        contentContainerStyle={styles.scrollContent}\n        ref={animatedRef}\n        horizontal={isScrollHorizontal}>\n        {Array.from({ length: 10 }).map((_, i) => (\n          <View key={i} style={styles.box}>\n            <Text style={styles.center}>{i}</Text>\n          </View>\n        ))}\n      </Animated.ScrollView>\n      <Button\n        title={`Toggle scroll to ${\n          isScrollHorizontal ? 'vertical' : 'horizontal'\n        }`}\n        onPress={() => setIsScrollHorizontal(!isScrollHorizontal)}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n  },\n  scroll: {\n    borderWidth: 1,\n    borderColor: 'gray',\n    height: 250,\n    width: 250,\n    margin: 20,\n  },\n  scrollContent: {\n    alignItems: 'center',\n  },\n  box: {\n    width: 100,\n    height: 100,\n    margin: 10,\n    borderRadius: 15,\n    backgroundColor: '#b58df1',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  center: {\n    textAlign: 'center',\n  },\n});\n\nconst AnimatedTextInput = Animated.createAnimatedComponent(TextInput);\n\nfunction AnimatedText({ text, ...props }: { text: DerivedValue<string> }) {\n  const animatedProps = useAnimatedProps(() => ({\n    text: text.value,\n    defaultValue: text.value,\n  }));\n  return (\n    <AnimatedTextInput\n      editable={false}\n      {...props}\n      value={text.value}\n      animatedProps={animatedProps}\n    />\n  );\n}\n"},48443:(e,t,n)=>{n.d(t,{A:()=>u});var l=n(39471),r=n(8589),o=n(31071),i=n(90424),a=n(14442),s=n(28313),c=n(19727),d=n(47671);const f={code:'function ScrollViewOffsetTsx1(){const{offset}=this.__closure;return"Scroll offset: "+offset.value.toFixed(1);}'};function u(){const e=(0,c.useAnimatedRef)(),t=(0,c.useScrollViewOffset)(e),n=(0,c.useDerivedValue)(function(e){let{_worklet_12630449126251_init_data:t,offset:n}=e;const l=()=>`Scroll offset: ${n.value.toFixed(1)}`;return l.__closure={offset:n},l.__workletHash=0xb7cc16efb6b,l.__initData=t,l}({_worklet_12630449126251_init_data:f,offset:t})),[a,s]=l.useState(!1);return(0,d.jsxs)(r.A,{style:m.container,children:[(0,d.jsx)(p,{text:n}),(0,d.jsx)(c.default.ScrollView,{style:m.scroll,contentContainerStyle:m.scrollContent,ref:e,horizontal:a,children:Array.from({length:10}).map(((e,t)=>(0,d.jsx)(r.A,{style:m.box,children:(0,d.jsx)(o.A,{style:m.center,children:t})},t)))}),(0,d.jsx)(i.A,{title:"Toggle scroll to "+(a?"vertical":"horizontal"),onPress:()=>s(!a)})]})}const m=a.A.create({container:{alignItems:"center"},scroll:{borderWidth:1,borderColor:"gray",height:250,width:250,margin:20},scrollContent:{alignItems:"center"},box:{width:100,height:100,margin:10,borderRadius:15,backgroundColor:"#b58df1",alignItems:"center",justifyContent:"center"},center:{textAlign:"center"}}),h=c.default.createAnimatedComponent(s.A),x={code:"function ScrollViewOffsetTsx2(){const{text}=this.__closure;return{text:text.value,defaultValue:text.value};}"};function p(e){let{text:t,...n}=e;const l=(0,c.useAnimatedProps)(function(e){let{_worklet_10706207841221_init_data:t,text:n}=e;const l=()=>({text:n.value,defaultValue:n.value});return l.__closure={text:n},l.__workletHash=0x9bcbbb71bc5,l.__initData=t,l}({_worklet_10706207841221_init_data:x,text:t}));return(0,d.jsx)(h,{editable:!1,...n,value:t.value,animatedProps:l})}},90424:(e,t,n)=>{n.d(t,{A:()=>c});var l=n(39471),r=n(14442),o=n(21844),i=n(31071),a=l.forwardRef(((e,t)=>{var n=e.accessibilityLabel,r=e.color,a=e.disabled,c=e.onPress,d=e.testID,f=e.title;return l.createElement(o.A,{accessibilityLabel:n,accessibilityRole:"button",disabled:a,focusable:!a,onPress:c,ref:t,style:[s.button,r&&{backgroundColor:r},a&&s.buttonDisabled],testID:d},l.createElement(i.A,{style:[s.text,a&&s.textDisabled]},f))}));a.displayName="Button";var s=r.A.create({button:{backgroundColor:"#2196F3",borderRadius:2},text:{color:"#fff",fontWeight:"500",padding:8,textAlign:"center",textTransform:"uppercase"},buttonDisabled:{backgroundColor:"#dfdfdf"},textDisabled:{color:"#a1a1a1"}});const c=a}}]);